[{"title":"Hello World","url":"/2023/03/14/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n"},{"title":"真·轮播视频实现，附加缩略图功能","url":"/2023/03/15/%E7%9C%9F%C2%B7%E8%BD%AE%E6%92%AD%E8%A7%86%E9%A2%91%E5%AE%9E%E7%8E%B0%EF%BC%8C%E9%99%84%E5%8A%A0%E7%BC%A9%E7%95%A5%E5%9B%BE%E5%8A%9F%E8%83%BD/","content":"轮播视频的概念极其适用场景和实现方法你真的需要轮播视频吗\n\n\n \n\n不懂了吧 网上的轮播视频粗略看一圈下来，基本都是把轮播图的img图片位置换成了video视频，这种时间一到就直接下一张的轮播并不符合我们的需求我们需要的是可以获取到视频播放长度，在视频彻底播放完之后才轮播到下一个视频的真轮播视频。这个时候就需要用到我们深厚且扎实的js功底，以我自己的轮播视频为例，先简单写一下基础的HTML和css布局  \n以下是HTML的部分&lt;!doctype html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta name=&quot;viewport&quot;          content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;    &lt;title&gt;轮播视频&lt;/title&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;banner.css&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;!-- 2. banner start --&gt;&lt;section id=&quot;banner&quot;&gt;    &lt;div class=&quot;videos-loop&quot;&gt;        &lt;div class=&quot;vp-area&quot;&gt;            &lt;video muted autoplay&gt;                &lt;source src=&quot;supreme.mp4&quot; type=&quot;video/mp4&quot;&gt;            &lt;/video&gt;        &lt;/div&gt;        &lt;div class=&quot;thumbnails&quot;&gt;            &lt;div class=&quot;video-item playing&quot;&gt;                &lt;video muted&gt;                    &lt;source src=&quot;supreme.mp4&quot; type=&quot;video/mp4&quot;&gt;                &lt;/video&gt;                &lt;div class=&quot;video-item-content&quot;&gt;                    &lt;h3&gt;There are birds that only land once in a lifetime.&lt;/h3&gt;                    &lt;p&gt;Do you want to know why? The time it landed was when it died.&lt;/p&gt;                &lt;/div&gt;            &lt;/div&gt;            &lt;div class=&quot;video-item&quot;&gt;                &lt;video muted&gt;                    &lt;source src=&quot;nike.mp4&quot; type=&quot;video/mp4&quot;&gt;                &lt;/video&gt;                &lt;div class=&quot;video-item-content&quot;&gt;                    &lt;h3&gt;There are birds that only land once in a lifetime.&lt;/h3&gt;                    &lt;p&gt;Do you want to know why? The time it landed was when it died.Do you want to know why? The                        time it landed was when it died.Do you want to know why? The time it landed was when it                        died.Do you want to know why? The time it landed was when it died.Do you want to know why?                        The time it landed was when it died.&lt;/p&gt;                &lt;/div&gt;            &lt;/div&gt;            &lt;div class=&quot;video-item&quot;&gt;                &lt;video muted&gt;                    &lt;source src=&quot;adidas.mp4&quot; type=&quot;video/mp4&quot;&gt;                &lt;/video&gt;                &lt;div class=&quot;video-item-content&quot;&gt;                    &lt;h3&gt;There are birds that only land once in a lifetime.&lt;/h3&gt;                    &lt;p&gt;Do you want to know why? The time it landed was when it died.&lt;/p&gt;                &lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/section&gt;&lt;!-- 2. banner end --&gt;&lt;/body&gt;&lt;script src=&quot;banner.js&quot;&gt;&lt;/script&gt;&lt;/html&gt;\n\n以下是CSS的部分可以按需删减　，此处的css随便写了几坨\n/*banner start*/#banner &#123;    margin-top: 100px;    width: 100%;    background-color: #000;    box-sizing: border-box;&#125;#banner .videos-loop &#123;    width: 1460px;    display: flex;    justify-content: space-between;    margin: 0 auto;&#125;#banner .videos-loop .vp-area &#123;    width: 1100px;    height: calc(1100px * 9 / 16);    background-color: #161616;&#125;#banner .videos-loop .vp-area video &#123;    width: 1100px;    height: calc(1100px * 9 / 16);&#125;#banner .videos-loop .thumbnails &#123;    width: calc(100% - 1100px);    height: calc(1100px * 9 / 16);    overflow: hidden;    display: flex;    flex-direction: column;    align-items: center;    background-color: #1e1e1e;&#125;#banner .videos-loop .thumbnails .video-item &#123;    width: 320px;    height: calc(120px);    padding: 10px;    display: flex;    transition: 0.5s ease-in-out;    border-radius: 4px;    cursor: pointer;&#125;#banner .videos-loop .thumbnails .video-item video &#123;    width: calc(320px * 0.4);    height: calc(calc(320px * 0.4) * 9 / 16);    object-fit: cover;    margin-right: 15px;    margin-top: 20px;&#125;#banner .videos-loop .thumbnails .video-item .video-item-content &#123;    flex: 1;    width: calc(calc(320px - calc(320px * 0.4)) - 15px);&#125;#banner .videos-loop .thumbnails .video-item .video-item-content h3 &#123;    width: inherit;    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis;    font-size: 16px;    color: rgba(255, 255, 255, 0.6);    margin-bottom: 12px;    transition: 0.2s ease-in-out;&#125;#banner .videos-loop .thumbnails .video-item .video-item-content p &#123;    width: inherit;    overflow: hidden;    text-overflow: ellipsis;    display: -webkit-box;    -webkit-box-orient: vertical;    -webkit-line-clamp: 2;    font-size: 16px;    color: #ccc;    transition: 0.2s ease-in-out;&#125;#banner .videos-loop .thumbnails .video-item:hover &#123;    background-color: #363636;&#125;#banner .videos-loop .thumbnails .video-item:hover .video-item-content h3 &#123;    color: #ffffff;&#125;#banner .videos-loop .thumbnails .video-item:hover .video-item-content p &#123;    color: #ccc;&#125;#banner .videos-loop .thumbnails .video-item.playing &#123;    background-color: #363636;&#125;#banner .videos-loop .thumbnails .video-item.playing .video-item-content h3 &#123;    color: #ffffff;&#125;#banner .videos-loop .thumbnails .video-item.playing .video-item-content p &#123;    color: #ccc;&#125;@media (min-width: 992px) and (max-width: 1200px) &#123;    #banner .videos-loop &#123;        width: 1160px;        display: flex;        justify-content: space-between;        margin: 0 auto;    &#125;    #banner .videos-loop .vp-area &#123;        width: 800px;        height: calc(800px * 9 / 16);        background-color: #161616;    &#125;    #banner .videos-loop .vp-area video &#123;        width: 800px;        height: calc(800px * 9 / 16);    &#125;    #banner .videos-loop .thumbnails &#123;        width: calc(100% - 800px);        height: calc(800px * 9 / 16);        overflow: hidden;        display: flex;        flex-direction: column;        align-items: center;        background-color: #1e1e1e;    &#125;&#125;@media (min-width: 700px) and (max-width: 992px) &#123;    #banner .videos-loop &#123;        width: 860px;        display: flex;        justify-content: space-between;        margin: 0 auto;    &#125;    #banner .videos-loop .thumbnails &#123;        width: calc(100% - 500px);        height: calc(650px * 9 / 16);        overflow: hidden;        display: flex;        flex-direction: column;        align-items: center;        background-color: #1e1e1e;    &#125;    #banner .videos-loop .vp-area &#123;        width: 500px;        height: calc(500px * 9 / 16);        background-color: #161616;    &#125;    #banner .videos-loop .vp-area video &#123;        width: 500px;        height: calc(500px * 9 / 16);        margin-top: 50px;    &#125;&#125;@media (max-width: 700px) &#123;    #banner .videos-loop &#123;        width: 480px;        display: flex;        flex-direction: column;        justify-content: space-between;        margin: 0 auto;    &#125;    #banner .videos-loop .vp-area &#123;        width: 480px;        height: calc(500px * 9 / 16);        background-color: #161616;    &#125;    #banner .videos-loop .vp-area video &#123;        width: 480px;        height: calc(600px * 9 / 16);    &#125;    #banner .videos-loop .thumbnails &#123;        width: calc(100% - 500px);        height: calc(500px * 9 / 16);        overflow: hidden;        display: flex;        flex-direction: column;        align-items: center;        background-color: #1e1e1e;    &#125;    #banner .videos-loop .thumbnails .video-item &#123;        width: 500px;        height: calc(120px);        padding: 10px;        display: flex;        transition: 0.5s ease-in-out;        border-radius: 4px;        cursor: pointer;        margin-bottom: 0;    &#125;    #banner .videos-loop .thumbnails &#123;        width: 480px;        height: calc(670px * 9 / 16);        overflow: hidden;        display: flex;        flex-direction: column;        align-items: center;        background-color: #1e1e1e;    &#125;&#125;/*banner end*/\n\n然后，把功能拆分，先实现轮播功能，这里就不细说了，直接上内容\nlet currIndex = 0;   let playA = document.querySelector(&quot;.vp-area&quot;);   let thumb = [...document.querySelectorAll(&quot;.thumbnails &gt; .video-item &gt; video&quot;)];   let playTime = null;   let smWindow = undefined;   // 轮播视频的主视频播放区域   const bannerVideo = function (event) &#123;       playA.children[0].removeEventListener(&quot;ended&quot;,bannerVideo);       document.querySelector(&quot;.playing&quot;).classList.remove(&quot;playing&quot;);       if (event.type != &quot;click&quot;) currIndex = ++currIndex % thumb.length;       let videoDom =                `&lt;video muted autoplay&gt;                    &lt;source src=&quot;$&#123;thumb[currIndex].children[0].getAttribute(&quot;src&quot;)&#125;&quot; type=&quot;video/mp4&quot;&gt;                &lt;/video&gt;`;       playA.innerHTML=videoDom;       thumb[currIndex].parentElement.classList.add(&quot;playing&quot;);       playA.children[0].addEventListener(&quot;ended&quot;,bannerVideo);   &#125;\n\n然后就是缩略图功能，当鼠标移到缩略图范围内时，主视频区的视频暂停，开始播放缩略图视频，鼠标移开缩略图时，主视频继续播放，如果点击了指定的视频，则播放指定的视频\n// 缩略图   const smallVideo = function () &#123;        let videos = document.querySelectorAll(&quot;.video-item&quot;);        videos.forEach((el,index) =&gt; &#123;            el.addEventListener(&quot;click&quot;, (event) =&gt; &#123;                if (smWindow != undefined) &#123;                    thumb[smWindow].pause();                    thumb[smWindow].currentTime = 0;                    playA.children[0].play();                &#125;                if (currIndex == index) return;                currIndex = index;                bannerVideo(event);            &#125;);            el.addEventListener(&quot;mouseover&quot;,() =&gt; &#123;                playTime = setTimeout(() =&gt;&#123;                    smWindow = index;                    playA.children[0].pause();                    thumb[index].play();                &#125;,100);            &#125;);            el.addEventListener(&quot;mouseleave&quot;, () =&gt; &#123;               clearTimeout(playTime);               setTimeout(()=&gt;&#123;                  smWindow = undefined;                  thumb[index].pause();                  thumb[index].currentTime = 0;                  playA.children[0].play();               &#125;,100);            &#125;);        &#125;);   &#125;\n\n\n完整的js内容如下(function () &#123;   let currIndex = 0;   let playA = document.querySelector(&quot;.vp-area&quot;);   let thumb = [...document.querySelectorAll(&quot;.thumbnails &gt; .video-item &gt; video&quot;)];   let playTime = null;   let smWindow = undefined;// 轮播视频的主视频播放区域   const bannerVideo = function (event) &#123;       playA.children[0].removeEventListener(&quot;ended&quot;,bannerVideo);       document.querySelector(&quot;.playing&quot;).classList.remove(&quot;playing&quot;);       if (event.type != &quot;click&quot;) currIndex = ++currIndex % thumb.length;       let videoDom =                `&lt;video muted autoplay&gt;                    &lt;source src=&quot;$&#123;thumb[currIndex].children[0].getAttribute(&quot;src&quot;)&#125;&quot; type=&quot;video/mp4&quot;&gt;                &lt;/video&gt;`;       playA.innerHTML=videoDom;       thumb[currIndex].parentElement.classList.add(&quot;playing&quot;);       playA.children[0].addEventListener(&quot;ended&quot;,bannerVideo);   &#125;   // 缩略图   const smallVideo = function () &#123;        let videos = document.querySelectorAll(&quot;.video-item&quot;);        videos.forEach((el,index) =&gt; &#123;            el.addEventListener(&quot;click&quot;, (event) =&gt; &#123;                if (smWindow != undefined) &#123;                    thumb[smWindow].pause();                    thumb[smWindow].currentTime = 0;                    playA.children[0].play();                &#125;                if (currIndex == index) return;                currIndex = index;                bannerVideo(event);            &#125;);            el.addEventListener(&quot;mouseover&quot;,() =&gt; &#123;                playTime = setTimeout(() =&gt;&#123;                    smWindow = index;                    playA.children[0].pause();                    thumb[index].play();                &#125;,100);            &#125;);            el.addEventListener(&quot;mouseleave&quot;, () =&gt; &#123;               clearTimeout(playTime);               setTimeout(()=&gt;&#123;                  smWindow = undefined;                  thumb[index].pause();                  thumb[index].currentTime = 0;                  playA.children[0].play();               &#125;,100);            &#125;);        &#125;);   &#125;    const run = function () &#123;        let videoELem = playA.children[0];        videoELem.addEventListener(&quot;ended&quot;, bannerVideo);        smallVideo();    &#125;    run();&#125;)();\n\n小结那么到此为止，一套完整的轮播视频＋缩略图就这么点了　　虽然细节没有说到位，但是反复看两遍源码，逻辑还是很简单的，点到为止，下播\n","categories":["Web的日常经验分享"],"tags":["javascript"]},{"title":"Js模拟惯性滑动插件","url":"/2023/03/15/Js%E6%A8%A1%E6%8B%9F%E6%83%AF%E6%80%A7%E6%BB%91%E5%8A%A8%E6%8F%92%E4%BB%B6/","content":"\n\n你小子，看到有标题就点啊，没了，晚点再更\n","categories":["Web的日常经验分享"],"tags":["javascript"]}]